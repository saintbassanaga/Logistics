# ============================================
# Logistics Platform - Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env file to version control!

# ============================================
# Database Configuration
# ============================================
POSTGRES_DB=logistics
POSTGRES_USER=transport_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_PORT=5434

# ============================================
# Keycloak Configuration
# ============================================

# Admin credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Database schema for Keycloak
KC_DB_SCHEMA=keycloak

# Hostname configuration
# Production: Use your domain (e.g., auth.yourdomain.com)
# Development: Use localhost
KC_HOSTNAME=localhost
KC_HOSTNAME_STRICT=false
KC_HOSTNAME_PORT=8443

# HTTP/HTTPS Configuration
# Production: Set KC_HTTP_ENABLED=false, KC_HTTPS_ENABLED=true
# Development: Set KC_HTTP_ENABLED=true, KC_HTTPS_ENABLED=false (or true with self-signed certs)
KC_HTTP_ENABLED=true
KC_HTTPS_ENABLED=false
KC_HTTP_PORT=8080
KC_HTTPS_PORT=8443

# Certificate paths (inside container)
KC_HTTPS_CERTIFICATE_FILE=/opt/keycloak/conf/server.crt.pem
KC_HTTPS_CERTIFICATE_KEY_FILE=/opt/keycloak/conf/server.key.pem

# Proxy configuration (use 'edge' if behind reverse proxy)
KC_PROXY=edge
KC_PROXY_HEADERS=xforwarded

# Metrics and logging
KC_METRICS_ENABLED=true
KC_LOG_LEVEL=info

# Transaction settings
KC_TRANSACTION_XA_ENABLED=false

# ============================================
# Application Configuration
# ============================================

# Spring Profile (local, dev, prod)
SPRING_PROFILES_ACTIVE=local

# Server port
SERVER_PORT=8081

# JWT Configuration
# Production: Use your Keycloak domain
# Development: Use localhost with appropriate port
JWT_ISSUER_URI=http://localhost:8080/realms/logistics
JWT_JWK_SET_URI=http://localhost:8080/realms/logistics/protocol/openid-connect/certs

# ============================================
# Keycloak Realm Configuration
# ============================================

# Service Account Secret (for machine-to-machine auth)
# Generate with: openssl rand -base64 32
SERVICE_ACCOUNT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET_HERE

# Initial Platform Admin Password
# User will be forced to change on first login
PLATFORM_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Frontend URLs (comma-separated for multiple environments)
FRONTEND_BASE_URL=http://localhost:3000

# ============================================
# SMTP Configuration (Email)
# ============================================

# Production: Use your SMTP provider (SendGrid, AWS SES, etc.)
# Development: Use mailhog or mailtrap
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME_SMTP_API_KEY_HERE
SMTP_STARTTLS=true
SMTP_AUTH=true
SMTP_SSL=false

# Email addresses
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_DISPLAY_NAME=Logistics Platform
SMTP_REPLY_TO=support@yourdomain.com
SMTP_REPLY_TO_DISPLAY_NAME=Logistics Platform Support

# ============================================
# Security Settings
# ============================================

# Session timeout in seconds (default: 30 minutes)
SESSION_TIMEOUT=1800

# Access token lifespan in seconds (default: 5 minutes)
ACCESS_TOKEN_LIFESPAN=300

# Refresh token lifespan in seconds (default: 10 hours)
REFRESH_TOKEN_LIFESPAN=36000